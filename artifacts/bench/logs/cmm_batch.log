=== Phase 12: Batched Safe Calls via Cmm ===

  cmm_safe_tid:    thread_num = 0
  cmm_batched(10): sum = 0 (expected 0 on main thread)

--- Per-call overhead at different batch sizes ---
  Batch size | Standard safe | Cmm batched | Speedup
  -----------|---------------|-------------|--------
           1 |      98.3 ns  |      97.9 ns |   1.0x
           2 |     100.0 ns  |      50.3 ns |   2.0x
           5 |      97.3 ns  |      20.8 ns |   4.7x
          10 |      97.4 ns  |      12.4 ns |   7.8x
          20 |     102.6 ns  |       7.6 ns |  13.4x
          50 |     104.6 ns  |       4.7 ns |  22.2x
         100 |      97.8 ns  |       3.7 ns |  26.4x

--- Analysis ---
  Standard safe: each call pays ~65ns suspend/resume overhead.
  Cmm batched: one suspend/resume (~65ns) amortized over N calls.
  At batch=100: per-call overhead approaches unsafe FFI (~2ns).

=== Done ===
